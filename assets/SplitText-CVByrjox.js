let P,F,Y=typeof Symbol=="function"?Symbol():"_split",K,oe=()=>K||ue.register(window.gsap),Z=typeof Intl<"u"&&"Segmenter"in Intl?new Intl.Segmenter:0,H=e=>typeof e=="string"?H(document.querySelectorAll(e)):"length"in e?Array.from(e).reduce((t,i)=>(typeof i=="string"?t.push(...H(i)):t.push(i),t),[]):[e],$=e=>H(e).filter(t=>t instanceof HTMLElement),Q=[],J=function(){},ae={add:e=>e()},de=/\s+/g,ee=new RegExp("\\p{RI}\\p{RI}|\\p{Emoji}(\\p{EMod}|\\u{FE0F}\\u{20E3}?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?(\\u{200D}\\p{Emoji}(\\p{EMod}|\\u{FE0F}\\u{20E3}?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?)*|.","gu"),G={left:0,top:0,width:0,height:0},he=(e,t)=>{for(;++t<e.length&&e[t]===G;);return e[t]||G},te=({element:e,html:t,ariaL:i,ariaH:s})=>{e.innerHTML=t,i?e.setAttribute("aria-label",i):e.removeAttribute("aria-label"),s?e.setAttribute("aria-hidden",s):e.removeAttribute("aria-hidden")},ie=(e,t)=>{if(t){let i=new Set(e.join("").match(t)||Q),s=e.length,a,c,r,o;if(i.size)for(;--s>-1;){c=e[s];for(r of i)if(r.startsWith(c)&&r.length>c.length){for(a=0,o=c;r.startsWith(o+=e[s+ ++a])&&o.length<r.length;);if(a&&o.length===r.length){e[s]=r,e.splice(s+1,a);break}}}}return e},se=e=>window.getComputedStyle(e).display==="inline"&&(e.style.display="inline-block"),z=(e,t,i)=>t.insertBefore(typeof e=="string"?document.createTextNode(e):e,i),U=(e,t,i)=>{let s=t[e+"sClass"]||"",{tag:a="div",aria:c="auto",propIndex:r=!1}=t,o=e==="line"?"block":"inline-block",h=s.indexOf("++")>-1,N=S=>{let g=document.createElement(a),_=i.length+1;return s&&(g.className=s+(h?" "+s+_:"")),r&&g.style.setProperty("--"+e,_+""),c!=="none"&&g.setAttribute("aria-hidden","true"),a!=="span"&&(g.style.position="relative",g.style.display=o),g.textContent=S,i.push(g),g};return h&&(s=s.replace("++","")),N.collection=i,N},pe=(e,t,i,s)=>{let a=U("line",i,s),c=window.getComputedStyle(e).textAlign||"left";return(r,o)=>{let h=a("");for(h.style.textAlign=c,e.insertBefore(h,t[r]);r<o;r++)h.appendChild(t[r]);h.normalize()}},re=(e,t,i,s,a,c,r,o,h,N)=>{var S;let g=Array.from(e.childNodes),_=0,{wordDelimiter:A,reduceWhiteSpace:B=!0,prepareText:q}=t,V=e.getBoundingClientRect(),R=V,D=!B&&window.getComputedStyle(e).whiteSpace.substring(0,3)==="pre",y=0,b=i.collection,l,f,O,n,m,v,j,d,p,W,C,E,T,k,w,u,L,x;for(typeof A=="object"?(O=A.delimiter||A,f=A.replaceWith||""):f=A===""?"":A||" ",l=f!==" ";_<g.length;_++)if(n=g[_],n.nodeType===3){for(w=n.textContent||"",B?w=w.replace(de," "):D&&(w=w.replace(/\n/g,f+`
`)),q&&(w=q(w,e)),n.textContent=w,m=f||O?w.split(O||f):w.match(o)||Q,L=m[m.length-1],d=l?L.slice(-1)===" ":!L,L||m.pop(),R=V,j=l?m[0].charAt(0)===" ":!m[0],j&&z(" ",e,n),m[0]||m.shift(),ie(m,h),c&&N||(n.textContent=""),p=1;p<=m.length;p++)if(u=m[p-1],!B&&D&&u.charAt(0)===`
`&&((S=n.previousSibling)==null||S.remove(),z(document.createElement("br"),e,n),u=u.slice(1)),!B&&u==="")z(f,e,n);else if(u===" ")e.insertBefore(document.createTextNode(" "),n);else{if(l&&u.charAt(0)===" "&&z(" ",e,n),y&&p===1&&!j&&b.indexOf(y.parentNode)>-1?(v=b[b.length-1],v.appendChild(document.createTextNode(s?"":u))):(v=i(s?"":u),z(v,e,n),y&&p===1&&!j&&v.insertBefore(y,v.firstChild)),s)for(C=Z?ie([...Z.segment(u)].map(I=>I.segment),h):u.match(o)||Q,x=0;x<C.length;x++)v.appendChild(C[x]===" "?document.createTextNode(" "):s(C[x]));if(c&&N){if(w=n.textContent=w.substring(u.length+1,w.length),W=v.getBoundingClientRect(),W.top>R.top&&W.left<=R.left){for(E=e.cloneNode(),T=e.childNodes[0];T&&T!==v;)k=T,T=T.nextSibling,E.appendChild(k);e.parentNode.insertBefore(E,e),a&&se(E)}R=W}(p<m.length||d)&&z(p>=m.length?" ":l&&u.slice(-1)===" "?" "+f:f,e,n)}e.removeChild(n),y=0}else n.nodeType===1&&(r&&r.indexOf(n)>-1?(b.indexOf(n.previousSibling)>-1&&b[b.length-1].appendChild(n),y=n):(re(n,t,i,s,a,c,r,o,h,!0),y=0),a&&se(n))};const ne=class le{constructor(t,i){this.isSplit=!1,oe(),this.elements=$(t),this.chars=[],this.words=[],this.lines=[],this.masks=[],this.vars=i,this.elements.forEach(r=>{var o;i.overwrite!==!1&&((o=r[Y])==null||o._data.orig.filter(({element:h})=>h===r).forEach(te)),r[Y]=this}),this._split=()=>this.isSplit&&this.split(this.vars);let s=[],a,c=()=>{let r=s.length,o;for(;r--;){o=s[r];let h=o.element.offsetWidth;if(h!==o.width){o.width=h,this._split();return}}};this._data={orig:s,obs:typeof ResizeObserver<"u"&&new ResizeObserver(()=>{clearTimeout(a),a=setTimeout(c,200)})},J(this),this.split(i)}split(t){return(this._ctx||ae).add(()=>{this.isSplit&&this.revert(),this.vars=t=t||this.vars||{};let{type:i="chars,words,lines",aria:s="auto",deepSlice:a=!0,smartWrap:c,onSplit:r,autoSplit:o=!1,specialChars:h,mask:N}=this.vars,S=i.indexOf("lines")>-1,g=i.indexOf("chars")>-1,_=i.indexOf("words")>-1,A=g&&!_&&!S,B=h&&("push"in h?new RegExp("(?:"+h.join("|")+")","gu"):h),q=B?new RegExp(B.source+"|"+ee.source,"gu"):ee,V=!!t.ignore&&$(t.ignore),{orig:R,animTime:D,obs:y}=this._data,b;(g||_||S)&&(this.elements.forEach((l,f)=>{R[f]={element:l,html:l.innerHTML,ariaL:l.getAttribute("aria-label"),ariaH:l.getAttribute("aria-hidden")},s==="auto"?l.setAttribute("aria-label",(l.textContent||"").trim()):s==="hidden"&&l.setAttribute("aria-hidden","true");let O=[],n=[],m=[],v=g?U("char",t,O):null,j=U("word",t,n),d,p,W,C;if(re(l,t,j,v,A,a&&(S||A),V,q,B,!1),S){let E=H(l.childNodes),T=pe(l,E,t,m),k,w=[],u=0,L=E.map(M=>M.nodeType===1?M.getBoundingClientRect():G),x=G,I;for(d=0;d<E.length;d++)k=E[d],k.nodeType===1&&(k.nodeName==="BR"?((!d||E[d-1].nodeName!=="BR")&&(w.push(k),T(u,d+1)),u=d+1,x=he(L,d)):(I=L[d],d&&I.top>x.top&&I.left<x.left+x.width-1&&(T(u,d),u=d),x=I));u<d&&T(u,d),w.forEach(M=>{var X;return(X=M.parentNode)==null?void 0:X.removeChild(M)})}if(!_){for(d=0;d<n.length;d++)if(p=n[d],g||!p.nextSibling||p.nextSibling.nodeType!==3)if(c&&!S){for(W=document.createElement("span"),W.style.whiteSpace="nowrap";p.firstChild;)W.appendChild(p.firstChild);p.replaceWith(W)}else p.replaceWith(...p.childNodes);else C=p.nextSibling,C&&C.nodeType===3&&(C.textContent=(p.textContent||"")+(C.textContent||""),p.remove());n.length=0,l.normalize()}this.lines.push(...m),this.words.push(...n),this.chars.push(...O)}),N&&this[N]&&this.masks.push(...this[N].map(l=>{let f=l.cloneNode();return l.replaceWith(f),f.appendChild(l),l.className&&(f.className=l.className.trim()+"-mask"),f.style.overflow="clip",f}))),this.isSplit=!0,F&&S&&(o?F.addEventListener("loadingdone",this._split):F.status==="loading"&&console.warn("SplitText called before fonts loaded")),(b=r&&r(this))&&b.totalTime&&(this._data.anim=D?b.totalTime(D):b),S&&o&&this.elements.forEach((l,f)=>{R[f].width=l.offsetWidth,y&&y.observe(l)})}),this}kill(){let{obs:t}=this._data;t&&t.disconnect(),F?.removeEventListener("loadingdone",this._split)}revert(){var t,i;if(this.isSplit){let{orig:s,anim:a}=this._data;this.kill(),s.forEach(te),this.chars.length=this.words.length=this.lines.length=s.length=this.masks.length=0,this.isSplit=!1,a&&(this._data.animTime=a.totalTime(),a.revert()),(i=(t=this.vars).onRevert)==null||i.call(t,this)}return this}static create(t,i){return new le(t,i)}static register(t){P=P||t||window.gsap,P&&(H=P.utils.toArray,J=P.core.context||J),!K&&window.innerWidth>0&&(F=document.fonts,K=!0)}};ne.version="3.14.2";let ue=ne;export{ue as SplitText,ue as default};
