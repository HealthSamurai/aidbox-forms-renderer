import{j as i}from"./index-BsWNCus6.js";import{r as c}from"./iframe-DXtTJtIS.js";import{o as re,a as se,c as L,d as m,B as y,N as ae,e as le,F as ue,Q as x}from"./form-DWk4cvsd.js";import"./index-BXc-CYbp.js";import"./preload-helper-PPVm8Dsz.js";const Y=re(function({store:t,onSubmit:u,onChange:a}){const[o,p]=c.useState(0);c.useEffect(()=>{if(!a)return;const e=se(()=>{t.response&&a(t.response)});return()=>{e()}},[a,t]);const d=e=>{e.preventDefault(),t.validateAll()&&t.response&&u&&u(t.response)},l=t.issues.map(e=>e.diagnostics?.trim()||e.details?.text?.trim()).filter(e=>!!e),h=t.nodes.filter(e=>L(e)&&e.control==="header"),W=t.nodes.filter(e=>L(e)&&e.control==="footer"),ee=new Set(h),te=new Set(W),U=t.nodes.filter(e=>!ee.has(e)&&!te.has(e)),H=U.filter(e=>pe(e)&&e.control==="page"),ie=new Set(H),ne=U.filter(e=>!ie.has(e)),z=h.filter(e=>!e.hidden),_=W.filter(e=>!e.hidden),F=H.filter(e=>!e.hidden),G=ne.filter(e=>!e.hidden),Z=H.length>0,s=F.length,g=s===0?0:Math.min(o,s-1),J=F[g];c.useEffect(()=>{o>=s&&s>0&&p(s-1),s===0&&o!==0&&p(0)},[o,s]);const oe=Z?i.jsxs("section",{className:"af-page-section",children:[i.jsxs("div",{className:"af-page-status","aria-live":"polite",children:["Page ",s===0?0:g+1," of"," ",Math.max(s,1)]}),J?i.jsx(ae,{node:J}):i.jsx("p",{className:"af-empty",children:"No pages currently enabled."}),i.jsxs("div",{className:"af-page-navigation",children:[i.jsx(y,{type:"button",variant:"secondary",onClick:()=>p(e=>Math.max(e-1,0)),disabled:g===0||s===0,children:"Previous"}),i.jsx(y,{type:"button",variant:"secondary",onClick:()=>p(e=>s===0?0:Math.min(e+1,s-1)),disabled:s===0||g>=s-1,children:"Next"})]})]}):null;return i.jsxs("form",{className:"af-form",onSubmit:d,children:[t.questionnaire.title||t.questionnaire.description?i.jsxs("header",{children:[t.questionnaire.title?i.jsx("h1",{className:"af-title",children:t.questionnaire.title}):null,t.questionnaire.description?i.jsx("p",{className:"af-description",children:t.questionnaire.description}):null]}):null,l.length>0?i.jsx("ul",{className:"af-form-errors",role:"alert",children:l.map((e,K)=>i.jsx("li",{children:e},K))}):null,i.jsxs("div",{className:"af-nodes",children:[z.length>0?i.jsx("section",{className:"af-form-header-block",children:i.jsx(m,{nodes:z})}):null,Z?i.jsxs(i.Fragment,{children:[oe,G.length>0?i.jsx(m,{nodes:G}):null]}):t.nodes.length>0?i.jsx(m,{nodes:U}):i.jsx("p",{className:"af-empty",children:"No nodes to display."}),_.length>0?i.jsx("section",{className:"af-form-footer-block",children:i.jsx(m,{nodes:_})}):null]}),i.jsxs("div",{className:"af-actions",children:[i.jsx(y,{type:"submit",children:"Submit"}),i.jsx(y,{type:"button",variant:"secondary",onClick:()=>t.reset(),children:"Reset"})]})]})});function pe(r){return L(r)||le(r)}Y.__docgenInfo={description:"",methods:[],displayName:"Form",props:{store:{required:!0,tsType:{name:"IForm"},description:""},onSubmit:{required:!1,tsType:{name:"union",raw:"((response: QuestionnaireResponse) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""},onChange:{required:!1,tsType:{name:"union",raw:"((response: QuestionnaireResponse) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""}}};function X({questionnaire:r,initialResponse:t,onSubmit:u,onChange:a,terminologyServerUrl:o}){const p=c.useMemo(()=>new ue(r,t,o),[r,t,o]);return p&&i.jsx(Y,{store:p,onSubmit:u,onChange:a})}X.__docgenInfo={description:"",methods:[],displayName:"Renderer",props:{questionnaire:{required:!0,tsType:{name:"Questionnaire"},description:""},initialResponse:{required:!1,tsType:{name:"union",raw:"QuestionnaireResponse | undefined",elements:[{name:"QuestionnaireResponse"},{name:"undefined"}]},description:""},onChange:{required:!1,tsType:{name:"union",raw:"((response: QuestionnaireResponse) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""},onSubmit:{required:!1,tsType:{name:"union",raw:"((response: QuestionnaireResponse) => void) | undefined",elements:[{name:"unknown"},{name:"undefined"}]},description:""},terminologyServerUrl:{required:!1,tsType:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},description:""}}};const ce="Questionnaire",de="text-controls",he="active",ge="Basic Text Inputs",me="Shows plain text-based controls rendered by the form.",ye=[{linkId:"intro",type:"display",text:"This sample renders simple string, text, uri and date/time inputs. Try typing into each field to observe validation and layout."},{linkId:"short-string",type:"string",text:"Your nickname"},{linkId:"long-text",type:"text",text:"Tell us about your favorite hobby"},{linkId:"url",type:"url",text:"Personal website"},{linkId:"date",type:"date",text:"Important date"},{linkId:"time",type:"time",text:"Preferred reminder time"},{linkId:"date-time",type:"dateTime",text:"Deadline"}],xe={resourceType:ce,id:de,status:he,title:ge,description:me,item:ye},fe="Questionnaire",ve="boolean-gating",we="active",ke="Boolean EnableWhen",qe="Demonstrates a dependent question driven by a yes/no toggle.",Ce=[{linkId:"intro",type:"display",text:"Toggle the switch to reveal the follow-up group. This mirrors a common pattern for asking optional details."},{linkId:"owns-car",type:"boolean",text:"Do you own a car?"},{linkId:"car-details",type:"group",text:"Car details",enableWhen:[{question:"owns-car",operator:"=",answerBoolean:!0}],item:[{linkId:"car-model",type:"string",text:"Model"},{linkId:"car-year",type:"integer",text:"Year"}]}],Se={resourceType:fe,id:ve,status:we,title:ke,description:qe,item:Ce},be="Questionnaire",Ie="numeric-thresholds",De="active",Oe="Numeric Comparisons",Te="Highlights enableWhen using greater/less-than operators.",$e=[{linkId:"intro",type:"display",text:"Enter a value to trigger comparison-based messages. Try numbers above and below the thresholds called out."},{linkId:"temperature",type:"decimal",text:"Body temperature (°C)"},{linkId:"fever-alert",type:"display",text:"⚠️ Fever suspected. Recommend follow-up.",enableWhen:[{question:"temperature",operator:">=",answerDecimal:38}]},{linkId:"hypothermia-alert",type:"display",text:"⚠️ Temperature is low. Monitor closely.",enableWhen:[{question:"temperature",operator:"<",answerDecimal:35}]}],Ee={resourceType:be,id:Ie,status:De,title:Oe,description:Te,item:$e},Qe="Questionnaire",Ae="active",Be="Numeric Units Showcase",Re="Highlights questionnaire-unit extension and unit display child items for integer and decimal questions.",Ne=[{linkId:"weight",text:"Body weight",type:"decimal",extension:[{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-unit",valueCoding:{system:"http://unitsofmeasure.org",code:"kg",display:"kg"}}],initial:[{valueDecimal:72.5}]},{linkId:"tablet-count",text:"Number of tablets to take",type:"integer",extension:[{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-unit",valueCoding:{system:"http://example.org/medication-units",code:"tablet",display:"tablet"}}],item:[{linkId:"tablet-count-unit",text:"tablet",type:"display",extension:[{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",valueCodeableConcept:{coding:[{system:"http://hl7.org/fhir/questionnaire-item-control",code:"unit"}]}}]}]}],Ve={resourceType:Qe,status:Ae,title:Be,description:Re,item:Ne},Me="Questionnaire",Pe="active",je="Quantity Unit Options Showcase",Ue="Starts with a quantity using enumerated units, followed by a free-form unit entry for contrast.",He=[{linkId:"dose",text:"Dose administered (with multiple unit options)",type:"quantity",extension:[{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-unitOption",valueCoding:{system:"http://unitsofmeasure.org",code:"mg",display:"mg"}},{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-unitOption",valueCoding:{system:"http://unitsofmeasure.org",code:"g",display:"g"}},{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-unitOption",valueCoding:{system:"http://unitsofmeasure.org",code:"mcg",display:"mcg"}}]},{linkId:"temperature",text:"Patient temperature (with single unit option)",type:"quantity",extension:[{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-unitOption",valueCoding:{system:"http://unitsofmeasure.org",code:"Cel",display:"°C"}}]},{linkId:"free-form-volume",text:"Volume (without predefined units)",type:"quantity"},{linkId:"infusion-rate",text:"Infusion rate (with legacy unit as initial value)",type:"quantity",extension:[{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-unitOption",valueCoding:{system:"http://unitsofmeasure.org",code:"mL/h",display:"mL/hour"}},{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-unitOption",valueCoding:{system:"http://unitsofmeasure.org",code:"L/h",display:"L/hour"}}],initial:[{valueQuantity:{value:125,system:"http://unitsofmeasure.org",code:"mL/d",unit:"mL/day"}}]}],Le={resourceType:Me,status:Pe,title:je,description:Ue,item:He},We="Questionnaire",ze="active",_e="Help Control Showcase",Fe="Demonstrates questionnaire items using help control children across different contexts.",Ge=[{linkId:"patient-name",text:"Patient full name",type:"string",item:[{linkId:"patient-name-help",text:"Enter the legal name as it appears on government-issued documents.",type:"display",extension:[{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",valueCodeableConcept:{coding:[{system:"http://hl7.org/fhir/questionnaire-item-control",code:"help"}]}}]}]},{linkId:"preferred-name",text:"Preferred name",type:"string"},{linkId:"medications",text:"Current medications",type:"group",repeats:!0,item:[{linkId:"medication-name",text:"Medication name",type:"string",item:[{linkId:"medication-name-help",text:"Include generic or brand name as listed on the prescription label.",type:"display",extension:[{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",valueCodeableConcept:{coding:[{system:"http://hl7.org/fhir/questionnaire-item-control",code:"help"}]}}]}]},{linkId:"medication-dosage",text:"Dosage",type:"string",item:[{linkId:"medication-dosage-help",text:"Specify strength and frequency (e.g., '5 mg twice daily').",type:"display",extension:[{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",valueCodeableConcept:{coding:[{system:"http://hl7.org/fhir/questionnaire-item-control",code:"help"}]}}]}]}]}],Ze={resourceType:We,status:ze,title:_e,description:Fe,item:Ge},Je="Questionnaire",Ke="repeating-question",Ye="active",Xe="Repeating Question Answers",et="Shows how repeating questions render add/remove controls.",tt=[{linkId:"intro",type:"display",text:"Use the + button to capture multiple favorite books. Try adding and removing entries to see the repeating question UI."},{linkId:"favorite-books",type:"string",text:"Favorite books",repeats:!0},{linkId:"favorite-genres",type:"string",text:"Favorite genres",repeats:!0,extension:[{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-minOccurs",valueInteger:1},{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-maxOccurs",valueInteger:3}]}],it={resourceType:Je,id:Ke,status:Ye,title:Xe,description:et,item:tt},nt="Questionnaire",ot="repeating-group",rt="active",st="Repeating Group Instances",at="Demonstrates repeating groups with nested child questions.",lt=[{linkId:"intro",type:"display",text:"Add multiple household members. Each instance maintains its own set of child fields."},{linkId:"household",type:"group",text:"Household member",repeats:!0,item:[{linkId:"member-name",type:"string",text:"Name",required:!0},{linkId:"member-age",type:"integer",text:"Age"},{linkId:"member-role",type:"coding",text:"Relationship",answerOption:[{valueCoding:{code:"spouse",display:"Spouse/Partner"}},{valueCoding:{code:"child",display:"Child"}},{valueCoding:{code:"parent",display:"Parent/Guardian"}},{valueCoding:{code:"other",display:"Other"}}]}]}],ut={resourceType:nt,id:ot,status:rt,title:st,description:at,item:lt},pt="Questionnaire",ct="nested-follow-ups",dt="active",ht="Nested Follow-up Items",gt="Illustrates child questions attached to answers.",mt=[{linkId:"intro",type:"display",text:"This demonstrates how child items can appear beneath a parent question."},{linkId:"primary-concern",type:"string",text:"Primary concern today",item:[{linkId:"concern-duration",type:"integer",text:"How many days has this been an issue?"},{linkId:"severity",type:"coding",text:"Severity",answerOption:[{valueCoding:{code:"mild",display:"Mild"}},{valueCoding:{code:"moderate",display:"Moderate"}},{valueCoding:{code:"severe",display:"Severe"}}],item:[{linkId:"severe-notes",type:"text",text:"Provide more detail if severity is severe",enableWhen:[{question:"severity",operator:"=",answerCoding:{code:"severe"}}]}]}]}],yt={resourceType:pt,id:ct,status:dt,title:ht,description:gt,item:mt},xt="Questionnaire",ft="static-initials",vt="active",wt="Static Initial Values",kt="Shows how questionnaire.item.initial seeds single and repeating answers, including read-only fields and minOccurs padding.",qt=[{linkId:"intro",type:"display",text:"Static initial values come from the questionnaire item. Edit the nickname, add an extra care-team member, and notice the read-only review date stays locked."},{linkId:"profile",type:"group",text:"Patient profile",item:[{linkId:"nickname",type:"string",text:"Preferred nickname",initial:[{valueString:"Buddy"}]},{linkId:"review-date",type:"date",text:"Last reviewed",readOnly:!0,initial:[{valueDate:"2025-10-30"}]}]},{linkId:"care-team",type:"group",text:"Care team contacts",item:[{linkId:"team-member",type:"string",text:"Team member name",repeats:!0,extension:[{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-minOccurs",valueInteger:3},{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-maxOccurs",valueInteger:4}],initial:[{valueString:"Primary Physician — Dr. Sloan"},{valueString:"Nurse Navigator — Casey Lee"}]}]},{linkId:"vitals",type:"group",text:"Baseline vitals",item:[{linkId:"baseline-weight",type:"quantity",text:"Weight",initial:[{valueQuantity:{value:72.5,unit:"kg",system:"http://unitsofmeasure.org",code:"kg"}}]}]}],Ct={resourceType:xt,id:ft,status:vt,title:wt,description:kt,item:qt},St="Questionnaire",bt="expression-initial",It="active",Dt="Initial Expression Defaults",Ot="Shows how initialExpression can pre-populate answers while still letting users edit them.",Tt=[{linkId:"intro",type:"display",text:"Update your weekly activity plan. The goal suggestion uses an initial expression and can be overridden."},{linkId:"exercise",type:"group",text:"Weekly exercise",extension:[{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-variable",valueExpression:{language:"text/fhirpath",name:"hoursAnswer",expression:"%context.item.where(linkId='current-hours').answer.valueInteger.last()"}}],item:[{linkId:"current-hours",type:"integer",text:"How many hours did you exercise last week?"},{linkId:"goal-hours",type:"integer",text:"Goal hours for this week",extension:[{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-initialExpression",valueExpression:{language:"text/fhirpath",expression:"iif(%hoursAnswer.exists(), %hoursAnswer + 1, 5)"}}]},{linkId:"coaching-note",type:"display",text:"Tip: Set a goal slightly higher than last week. The initial value shows a suggested target."}]}],$t={resourceType:St,id:bt,status:It,title:Dt,description:Ot,item:Tt},Et="Questionnaire",Qt="expression-calculated",At="active",Bt="Calculated BMI",Rt="Demonstrates calculatedExpression with shared variables.",Nt=[{linkId:"intro",type:"display",text:"Enter height and weight to calculate BMI automatically. Changing either value recalculates BMI until you override it."},{linkId:"metrics",type:"group",text:"Body metrics",extension:[{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-variable",valueExpression:{language:"text/fhirpath",name:"heightCm",expression:"%context.item.where(linkId='height').answer.valueDecimal.last()"}},{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-variable",valueExpression:{language:"text/fhirpath",name:"weightKg",expression:"%context.item.where(linkId='weight').answer.valueDecimal.last()"}}],item:[{linkId:"height",type:"decimal",text:"Height (cm)"},{linkId:"weight",type:"decimal",text:"Weight (kg)"},{linkId:"bmi",type:"decimal",text:"Body mass index",extension:[{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-calculatedExpression",valueExpression:{language:"text/fhirpath",name:"bmiCalc",expression:"iif(%heightCm.exists() and %weightKg.exists(), (%weightKg / ((%heightCm / 100) * (%heightCm / 100))).round(1), {})"}}]},{linkId:"category",type:"display",text:"BMI category updates once BMI is available.",extension:[{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-enableWhenExpression",valueExpression:{language:"text/fhirpath",expression:"%context.item.where(linkId='bmi').answer.valueDecimal.exists()"}}]}]}],Vt={resourceType:Et,id:Qt,status:At,title:Bt,description:Rt,item:Nt},Mt="Questionnaire",Pt="expression-enable-when",jt="active",Ut="Expression-based Enablement",Ht="Highlights sdc-questionnaire-enableWhenExpression for complex gating logic.",Lt=[{linkId:"intro",type:"display",text:"Answer the screening questions. Follow-up advice appears based on a composite expression."},{linkId:"screen",type:"group",text:"Screening",extension:[{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-variable",valueExpression:{language:"text/fhirpath",name:"exposureRisk",expression:"%context.item.where(linkId='travel').answer.valueBoolean.where($this = true).exists() or %context.item.where(linkId='contact').answer.valueBoolean.where($this = true).exists()"}},{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-variable",valueExpression:{language:"text/fhirpath",name:"symptomatic",expression:"%context.item.where(linkId='symptoms').answer.valueBoolean.where($this = true).exists()"}}],item:[{linkId:"symptoms",type:"boolean",text:"Are you experiencing new symptoms?"},{linkId:"travel",type:"boolean",text:"Have you travelled internationally in the past 14 days?"},{linkId:"contact",type:"boolean",text:"Have you been in close contact with a confirmed case?"},{linkId:"testing-advice",type:"display",text:"Recommend PCR testing within 24 hours.",extension:[{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-enableWhenExpression",valueExpression:{language:"text/fhirpath",expression:"%symptomatic and %exposureRisk"}}]},{linkId:"monitor-advice",type:"display",text:"Continue to monitor for symptoms. Testing not required right now.",extension:[{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-enableWhenExpression",valueExpression:{language:"text/fhirpath",expression:"(%symptomatic or %exposureRisk) and (%symptomatic and %exposureRisk).not()"}}]}]}],Wt={resourceType:Mt,id:Pt,status:jt,title:Ut,description:Ht,item:Lt},zt="Questionnaire",_t="expression-dynamic-bounds",Ft="active",Gt="Dynamic Min/Max Expressions",Zt="Demonstrates minValueExpression and maxValueExpression enforcing context-aware ranges.",Jt=[{linkId:"intro",type:"display",text:"Target values are constrained using expressions derived from earlier answers. Try entering values outside the suggested window."},{linkId:"goals",type:"group",text:"Metabolic goals",extension:[{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-variable",valueExpression:{language:"text/fhirpath",name:"baselineWeight",expression:"%context.item.where(linkId='current-weight').answer.valueDecimal.last()"}},{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-variable",valueExpression:{language:"text/fhirpath",name:"baselineGlucose",expression:"%context.item.where(linkId='current-glucose').answer.valueInteger.last()"}}],item:[{linkId:"current-weight",type:"decimal",text:"Current weight (kg)"},{linkId:"target-weight",type:"decimal",text:"Target weight (kg)",extension:[{url:"http://hl7.org/fhir/StructureDefinition/minValue",valueDecimal:0,_valueDecimal:{extension:[{url:"http://hl7.org/fhir/StructureDefinition/cqf-expression",valueExpression:{language:"text/fhirpath",expression:"iif(%baselineWeight.exists(), %baselineWeight - 10, 40)"}}]}},{url:"http://hl7.org/fhir/StructureDefinition/maxValue",valueDecimal:0,_valueDecimal:{extension:[{url:"http://hl7.org/fhir/StructureDefinition/cqf-expression",valueExpression:{language:"text/fhirpath",expression:"iif(%baselineWeight.exists(), %baselineWeight - 2, 90)"}}]}}]},{linkId:"current-glucose",type:"integer",text:"Current fasting glucose (mg/dL)"},{linkId:"target-glucose",type:"integer",text:"Target fasting glucose (mg/dL)",extension:[{url:"http://hl7.org/fhir/StructureDefinition/minValue",valueInteger:0,_valueInteger:{extension:[{url:"http://hl7.org/fhir/StructureDefinition/cqf-expression",valueExpression:{language:"text/fhirpath",expression:"iif(%baselineGlucose.exists(), %baselineGlucose - 20, 70)"}}]}},{url:"http://hl7.org/fhir/StructureDefinition/maxValue",valueInteger:0,_valueInteger:{extension:[{url:"http://hl7.org/fhir/StructureDefinition/cqf-expression",valueExpression:{language:"text/fhirpath",expression:"iif(%baselineGlucose.exists(), %baselineGlucose - 5, 110)"}}]}}]}]}],Kt={resourceType:zt,id:_t,status:Ft,title:Gt,description:Zt,item:Jt},Yt="Questionnaire",Xt="expression-dynamic-behavior",ei="active",ti="Dynamic Behavior Expressions",ii="Shows how expressions can switch labels, read-only state, repeats, required flags, and min/max occurs settings at runtime.",ni=[{linkId:"intro",type:"display",text:"Use the toggles below to see the nickname and update fields react to expressions."},{linkId:"controls",type:"group",text:"Behavior toggles",extension:[{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-variable",valueExpression:{language:"text/fhirpath",name:"useNickname",expression:"%context.item.where(linkId='nickname-label-toggle').answer.valueBoolean.last()"}},{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-variable",valueExpression:{language:"text/fhirpath",name:"lockNickname",expression:"%context.item.where(linkId='nickname-lock-toggle').answer.valueBoolean.last()"}},{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-variable",valueExpression:{language:"text/fhirpath",name:"allowMultiple",expression:"%context.item.where(linkId='nickname-repeat-toggle').answer.valueBoolean.last()"}},{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-variable",valueExpression:{language:"text/fhirpath",name:"requireNickname",expression:"%context.item.where(linkId='nickname-required-toggle').answer.valueBoolean.last()"}},{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-variable",valueExpression:{language:"text/fhirpath",name:"updateMin",expression:"%context.item.where(linkId='min-occurs-count').answer.valueInteger.last()"}},{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-variable",valueExpression:{language:"text/fhirpath",name:"updateMax",expression:"%context.item.where(linkId='max-occurs-count').answer.valueInteger.last()"}}],item:[{linkId:"nickname-label-toggle",type:"boolean",text:"Use personalized nickname label?"},{linkId:"nickname-lock-toggle",type:"boolean",text:"Lock nickname entry?"},{linkId:"nickname-repeat-toggle",type:"boolean",text:"Allow multiple nicknames?"},{linkId:"nickname-required-toggle",type:"boolean",text:"Make nickname required?"},{linkId:"min-occurs-count",type:"integer",text:"Minimum number of weekly updates",initial:[{valueInteger:1}]},{linkId:"max-occurs-count",type:"integer",text:"Maximum number of weekly updates",initial:[{valueInteger:3}]},{linkId:"nickname",type:"string",repeats:!0,text:"Nickname",_text:{extension:[{url:"http://hl7.org/fhir/StructureDefinition/cqf-expression",valueExpression:{language:"text/fhirpath",expression:"iif(%useNickname, 'Preferred nickname', 'Optional nickname')"}}]},_readOnly:{extension:[{url:"http://hl7.org/fhir/StructureDefinition/cqf-expression",valueExpression:{language:"text/fhirpath",expression:"%lockNickname"}}]},_repeats:{extension:[{url:"http://hl7.org/fhir/StructureDefinition/cqf-expression",valueExpression:{language:"text/fhirpath",expression:"%allowMultiple"}}]},_required:{extension:[{url:"http://hl7.org/fhir/StructureDefinition/cqf-expression",valueExpression:{language:"text/fhirpath",expression:"%requireNickname"}}]}},{linkId:"status-updates",type:"string",text:"Weekly update",repeats:!0,extension:[{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-minOccurs",valueInteger:0,_valueInteger:{extension:[{url:"http://hl7.org/fhir/StructureDefinition/cqf-expression",valueExpression:{language:"text/fhirpath",expression:"iif(%updateMin.exists(), %updateMin, 0)"}}]}},{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-maxOccurs",valueInteger:5,_valueInteger:{extension:[{url:"http://hl7.org/fhir/StructureDefinition/cqf-expression",valueExpression:{language:"text/fhirpath",expression:"iif(%updateMax.exists(), %updateMax, 5)"}}]}}],item:[{linkId:"update-note",type:"string",text:"Summary"}]}]}],oi={resourceType:Yt,id:Xt,status:ei,title:ti,description:ii,item:ni},ri="Questionnaire",si="expression-dynamic-quantity",ai="active",li="Dynamic Quantity Expressions",ui="Shows minQuantityExpression and maxQuantityExpression adjusting the allowable titration window for a medication dose.",pi=[{linkId:"intro",type:"display",text:"Adjust the current dose and clinic limit to see the suggested titration window update."},{linkId:"dosing",type:"group",text:"Dose planning",extension:[{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-variable",valueExpression:{language:"text/fhirpath",name:"currentDose",expression:"%context.item.where(linkId='current-dose').answer.valueQuantity.last()"}},{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-variable",valueExpression:{language:"text/fhirpath",name:"clinicCeiling",expression:"%context.item.where(linkId='clinic-limit').answer.valueQuantity.last()"}}],item:[{linkId:"current-dose",type:"quantity",text:"Current daily dose",initial:[{valueQuantity:{value:60,unit:"mg",system:"http://unitsofmeasure.org",code:"mg"}}]},{linkId:"clinic-limit",type:"quantity",text:"Clinic ceiling",initial:[{valueQuantity:{value:90,unit:"mg",system:"http://unitsofmeasure.org",code:"mg"}}]},{linkId:"target-dose",type:"quantity",text:"Proposed target dose",extension:[{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-minQuantity",valueQuantity:{value:0,unit:"mg",system:"http://unitsofmeasure.org",code:"mg",extension:[{url:"http://hl7.org/fhir/StructureDefinition/cqf-expression",valueExpression:{language:"text/fhirpath",expression:"iif(%currentDose.exists(), %currentDose - 10 'mg', 0 'mg')"}}]}},{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-maxQuantity",valueQuantity:{value:0,unit:"mg",system:"http://unitsofmeasure.org",code:"mg",extension:[{url:"http://hl7.org/fhir/StructureDefinition/cqf-expression",valueExpression:{language:"text/fhirpath",expression:"iif(%clinicCeiling.exists(), %clinicCeiling, 120 'mg')"}}]}}]}]}],ci={resourceType:ri,id:si,status:ai,title:li,description:ui,item:pi},di="Questionnaire",hi="answer-options",gi="active",mi="Answer Options Showcase",yi="Demonstrates rendering of answerOption for multiple question types.",xi=[{linkId:"coding-question",type:"coding",text:"Preferred contact method",answerOption:[{valueCoding:{system:"http://terminology.hl7.org/CodeSystem/contact-point-system",code:"phone",display:"Phone"}},{valueCoding:{system:"http://terminology.hl7.org/CodeSystem/contact-point-system",code:"email",display:"Email"}},{valueCoding:{system:"http://terminology.hl7.org/CodeSystem/contact-point-system",code:"sms",display:"SMS"}}]},{linkId:"boolean-question",type:"boolean",text:"Receive promotional messages?",answerOption:[{valueBoolean:!0},{valueBoolean:!1}]},{linkId:"string-question",type:"string",text:"Favorite color",answerOption:[{valueString:"Red"},{valueString:"Green"},{valueString:"Blue"}]},{linkId:"decimal-question",type:"decimal",text:"Hours of sleep on a typical night",answerOption:[{valueDecimal:6},{valueDecimal:7.5},{valueDecimal:8}]},{linkId:"integer-question",type:"integer",text:"Number of cups of coffee per day",answerOption:[{valueInteger:0},{valueInteger:1},{valueInteger:2},{valueInteger:3}]},{linkId:"date-question",type:"date",text:"Preferred appointment day",answerOption:[{valueDate:"2025-11-03"},{valueDate:"2025-11-04"},{valueDate:"2025-11-05"}]},{linkId:"datetime-question",type:"dateTime",text:"Preferred appointment time",answerOption:[{valueDateTime:"2025-11-03T09:00:00-05:00"},{valueDateTime:"2025-11-03T13:00:00-05:00"},{valueDateTime:"2025-11-03T16:30:00-05:00"}]},{linkId:"time-question",type:"time",text:"Best contact window",answerOption:[{valueTime:"08:00:00"},{valueTime:"12:00:00"},{valueTime:"18:00:00"}]},{linkId:"quantity-question",type:"quantity",text:"Usual coffee size",answerOption:[{valueQuantity:{value:8,unit:"oz",system:"http://unitsofmeasure.org",code:"[foz_us]"}},{valueQuantity:{value:12,unit:"oz",system:"http://unitsofmeasure.org",code:"[foz_us]"}},{valueQuantity:{value:16,unit:"oz",system:"http://unitsofmeasure.org",code:"[foz_us]"}}]},{linkId:"reference-question",type:"reference",text:"Primary care provider",answerOption:[{valueReference:{reference:"Practitioner/alpha",display:"Dr. Alice Carter"}},{valueReference:{reference:"Practitioner/beta",display:"Dr. Ben Lee"}},{valueReference:{reference:"Practitioner/gamma",display:"Dr. Grace Patel"}}]},{linkId:"url-question",type:"url",text:"Preferred telehealth platform",answerOption:[{valueUri:"https://zoom.us"},{valueUri:"https://teams.microsoft.com"},{valueUri:"https://meet.google.com"}]}],fi={resourceType:di,id:hi,status:gi,title:mi,description:yi,item:xi},vi="Questionnaire",wi="answer-expression",ki="active",qi="Answer Expression Showcase",Ci="Demonstrates runtime answer lists populated by sdc-questionnaire-answerExpression for multiple data types.",Si=[{linkId:"dynamic-colors",text:"Collect and reuse color choices",type:"group",extension:[{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-variable",valueExpression:{name:"collectedColors",language:"text/fhirpath",expression:"%context.item.where(linkId='color-source').answer.valueString"}}],item:[{linkId:"color-source",type:"string",repeats:!0,text:"Add every color that should be available"},{linkId:"color-select",type:"string",text:"Pick a favorite color",extension:[{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-answerExpression",valueExpression:{language:"text/fhirpath",expression:"%collectedColors"}}]}]},{linkId:"sleep-patterns",text:"Choose typical sleep duration",type:"decimal",extension:[{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-answerExpression",valueExpression:{language:"text/fhirpath",expression:"(6.0 | 7.0 | 7.5 | 8.0)"}}]},{linkId:"dose-options",text:"Suggested dosage",type:"quantity",extension:[{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-answerExpression",valueExpression:{language:"text/fhirpath",expression:"(%factory.Quantity('http://unitsofmeasure.org', 'mg', 50, 'mg') | %factory.Quantity('http://unitsofmeasure.org', 'mg', 100, 'mg') | %factory.Quantity('http://unitsofmeasure.org', 'mg', 150, 'mg'))"}}]}],bi={resourceType:vi,id:wi,status:ki,title:qi,description:Ci,item:Si},Ii="Questionnaire",Di="constraint",Oi="active",Ti="Validation Showcase",$i="Illustrates every validation constraint supported by the renderer, showing how they behave across nested groups, repeating questions, and attachments.",Ei=JSON.parse('[{"linkId":"intro","type":"display","text":"Constraint Overview","item":[{"linkId":"intro-help","type":"display","text":"Read the parenthetical notes to learn what each item expects","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"help"}]}}]}]},{"linkId":"patient-basics","type":"group","text":"Patient Basics","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-minOccurs","valueInteger":1}],"item":[{"linkId":"full-name","type":"string","text":"Full legal name","required":true,"maxLength":60,"extension":[{"url":"http://hl7.org/fhir/StructureDefinition/minLength","valueInteger":1}],"item":[{"linkId":"full-name-help","type":"display","text":"Required; between 1 and 60 characters","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"help"}]}}]}]},{"linkId":"preferred-name","type":"string","text":"Preferred name","maxLength":20,"extension":[{"url":"http://hl7.org/fhir/StructureDefinition/minLength","valueInteger":3}],"item":[{"linkId":"preferred-name-help","type":"display","text":"Between 3 and 20 characters","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"help"}]}}]}]},{"linkId":"age","type":"integer","text":"Age in years","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/minValue","valueInteger":0},{"url":"http://hl7.org/fhir/StructureDefinition/maxValue","valueInteger":120}],"item":[{"linkId":"age-help","type":"display","text":"Must be between 0 and 120","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"help"}]}}]}]},{"linkId":"height","type":"decimal","text":"Height in meters","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/maxDecimalPlaces","valueInteger":2},{"url":"http://hl7.org/fhir/StructureDefinition/minValue","valueDecimal":0.4},{"url":"http://hl7.org/fhir/StructureDefinition/maxValue","valueDecimal":2.5}],"item":[{"linkId":"height-help","type":"display","text":"Accepts up to 2 decimal places","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"help"}]}}]}]},{"linkId":"birth-date","type":"date","text":"Date of birth","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/minValue","valueDate":"1900-01-01"},{"url":"http://hl7.org/fhir/StructureDefinition/maxValue","valueDate":"2025-11-02"}],"item":[{"linkId":"birth-date-help","type":"display","text":"Must fall between 1900-01-01 and today","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"help"}]}}]}]},{"linkId":"consent-signed-at","type":"dateTime","text":"Consent signed timestamp","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/minValue","valueDateTime":"2025-01-01T00:00:00Z"},{"url":"http://hl7.org/fhir/StructureDefinition/maxValue","valueDateTime":"2025-12-31T23:59:59Z"}],"item":[{"linkId":"consent-signed-at-help","type":"display","text":"Must be within calendar year 2025","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"help"}]}}]}]},{"linkId":"fasting-start","type":"time","text":"Fasting start time","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/minValue","valueTime":"18:00:00"},{"url":"http://hl7.org/fhir/StructureDefinition/maxValue","valueTime":"23:59:59"}],"item":[{"linkId":"fasting-start-help","type":"display","text":"Limit entry between 18:00:00 and 23:59:59","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"help"}]}}]}]},{"linkId":"weight","type":"quantity","text":"Body weight","extension":[{"url":"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-minQuantity","valueQuantity":{"value":30,"unit":"kg","system":"http://unitsofmeasure.org","code":"kg"}},{"url":"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-maxQuantity","valueQuantity":{"value":250,"unit":"kg","system":"http://unitsofmeasure.org","code":"kg"}}],"item":[{"linkId":"weight-help","type":"display","text":"Must stay between 30 kg and 250 kg","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"help"}]}}]}]},{"linkId":"photo-id","type":"attachment","text":"Government ID upload","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/mimeType","valueCode":"image/png"},{"url":"http://hl7.org/fhir/StructureDefinition/mimeType","valueCode":"image/jpeg"},{"url":"http://hl7.org/fhir/StructureDefinition/maxSize","valueDecimal":1024}],"item":[{"linkId":"photo-id-help","type":"display","text":"PNG or JPEG up to 1 MB","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"help"}]}}]}]},{"linkId":"patient-basics-help","type":"display","text":"Group requires at least one populated answer","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"help"}]}}]}]},{"linkId":"reported-symptoms","type":"string","text":"Reported symptom","repeats":true,"extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-minOccurs","valueInteger":1},{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-maxOccurs","valueInteger":3},{"url":"http://hl7.org/fhir/StructureDefinition/minLength","valueInteger":2}],"maxLength":120,"item":[{"linkId":"reported-symptoms-help","type":"display","text":"Repeat 1-3 times to describe each symptom","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"help"}]}}]}]},{"linkId":"medications","type":"group","text":"Active medications","repeats":true,"extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-minOccurs","valueInteger":1},{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-maxOccurs","valueInteger":2}],"item":[{"linkId":"med-name","type":"string","text":"Medication name","required":true,"maxLength":50,"extension":[{"url":"http://hl7.org/fhir/StructureDefinition/minLength","valueInteger":2}],"item":[{"linkId":"med-name-help","type":"display","text":"Required; between 2 and 50 characters","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"help"}]}}]}]},{"linkId":"med-dose","type":"quantity","text":"Dosage","extension":[{"url":"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-minQuantity","valueQuantity":{"value":0.5,"unit":"mg","system":"http://unitsofmeasure.org","code":"mg"}},{"url":"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-maxQuantity","valueQuantity":{"value":10,"unit":"mg","system":"http://unitsofmeasure.org","code":"mg"}}],"item":[{"linkId":"med-dose-help","type":"display","text":"Quantity must stay within prescribed range","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"help"}]}}]}]},{"linkId":"med-administration-window","type":"time","text":"Administration window","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/minValue","valueTime":"06:00:00"},{"url":"http://hl7.org/fhir/StructureDefinition/maxValue","valueTime":"22:00:00"}],"item":[{"linkId":"med-administration-window-help","type":"display","text":"Dose time must be between 06:00 and 22:00","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"help"}]}}]}]},{"linkId":"dose-notes","type":"string","text":"Dose notes","maxLength":80,"item":[{"linkId":"dose-notes-help","type":"display","text":"Optional free-text up to 80 characters","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"help"}]}}]}]},{"linkId":"dose-times","type":"dateTime","text":"Scheduled dose time","repeats":true,"extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-minOccurs","valueInteger":1},{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-maxOccurs","valueInteger":4},{"url":"http://hl7.org/fhir/StructureDefinition/minValue","valueDateTime":"2025-01-01T00:00:00Z"},{"url":"http://hl7.org/fhir/StructureDefinition/maxValue","valueDateTime":"2025-12-31T23:59:59Z"}],"item":[{"linkId":"dose-times-help","type":"display","text":"Must fall within treatment year","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"help"}]}}]}]},{"linkId":"medications-help","type":"display","text":"Collect 1-2 medication entries with nested limits","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"help"}]}}]}]}]'),Qi={resourceType:Ii,id:Di,status:Oi,title:Ti,description:$i,item:Ei},Ai="Questionnaire",Bi="target-constraint",Ri="active",Ni="Target Constraint Extensions",Vi="Demonstrates target-constraint expressions that enforce formatting and cross-item business rules beyond standard SDC flags.",Mi=[{linkId:"identity",type:"group",text:"Identity for badge printing",item:[{linkId:"given-name",type:"string",text:"Given name (printed on badge)",extension:[{url:"http://hl7.org/fhir/StructureDefinition/targetConstraint",extension:[{url:"key",valueId:"given-name-uppercase"},{url:"severity",valueCode:"error"},{url:"human",valueString:"Start the given name with a capital letter so the badge matches the facility format."},{url:"expression",valueExpression:{language:"text/fhirpath",expression:"answer.valueString.all($this = '' or $this.substring(0, 1) = $this.substring(0, 1).upper())"}}]}],item:[{linkId:"given-name-help",type:"display",text:'Example: "Maria" passes, "maria" fails until the first letter is capitalized.',extension:[{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",valueCodeableConcept:{coding:[{system:"http://hl7.org/fhir/questionnaire-item-control",code:"help"}]}}]}]}]},{linkId:"contact-info",type:"group",text:"Work contact channel",item:[{linkId:"work-email",type:"string",text:"Work email for study updates",extension:[{url:"http://hl7.org/fhir/StructureDefinition/targetConstraint",extension:[{url:"key",valueId:"email-domain-match"},{url:"severity",valueCode:"error"},{url:"human",valueString:"Use an email address that ends with the approved domain."},{url:"location",valueString:"QuestionnaireResponse.item.where(linkId='contact-info')"},{url:"expression",valueExpression:{language:"text/fhirpath",expression:"iif(%workEmail.empty() or %collegeDomain.empty(), true, %workEmail.first().lower().endsWith('@' & %collegeDomain.first().lower()))"}}]}]},{linkId:"organization-domain",type:"string",text:"Approved organization email domain",extension:[{url:"http://hl7.org/fhir/StructureDefinition/targetConstraint",extension:[{url:"key",valueId:"college-domain-warning"},{url:"severity",valueCode:"warning"},{url:"human",valueString:"Provide a subdomain of the college site (for example, research.college.edu)."},{url:"expression",valueExpression:{language:"text/fhirpath",expression:"iif(%collegeDomain.empty(), true, %collegeDomain.first().endsWith('college.edu'))"}}]}]}],extension:[{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-variable",valueExpression:{language:"text/fhirpath",name:"workEmail",expression:"%context.item.where(linkId='work-email').answer.valueString"}},{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-variable",valueExpression:{language:"text/fhirpath",name:"collegeDomain",expression:"%context.item.where(linkId='organization-domain').answer.valueString"}}]},{linkId:"updates-consent",type:"boolean",text:"May we email you study updates at this address?"}],Pi=[{url:"http://hl7.org/fhir/StructureDefinition/targetConstraint",extension:[{url:"key",valueId:"consent-needs-email"},{url:"severity",valueCode:"error"},{url:"human",valueString:"Consent is only valid if a work email is on file."},{url:"expression",valueExpression:{language:"text/fhirpath",expression:"item.where(linkId='updates-consent').answer.valueBoolean.where($this = true).empty() or repeat(item).where(linkId='work-email').answer.valueString.exists()"}}]},{url:"http://hl7.org/fhir/StructureDefinition/targetConstraint",extension:[{url:"key",valueId:"professional-email-warning"},{url:"severity",valueCode:"warning"},{url:"human",valueString:"Using a personal email address may delay provisioning; consider supplying a college-issued account."},{url:"expression",valueExpression:{language:"text/fhirpath",expression:"item.where(linkId='contact-info').item.where(linkId='work-email').answer.valueString.where($this.lower().endsWith('@gmail.com') or $this.lower().endsWith('@yahoo.com') or $this.lower().endsWith('@hotmail.com')).empty()"}}]}],ji={resourceType:Ai,id:Bi,status:Ri,title:Ni,description:Vi,item:Mi,extension:Pi},Ui="Questionnaire",Hi="answer-constraint-examples",Li="http://example.org/Questionnaire/answer-constraint-examples",Wi="active",zi="Answer Constraint Examples",_i="Demonstrates answerConstraint property with answerOptions",Fi=[{linkId:"section-optionsOnly",type:"group",text:"Options Only (Default Behavior)",item:[{linkId:"country",type:"string",text:"Select your country",answerConstraint:"optionsOnly",answerOption:[{valueString:"USA"},{valueString:"Canada"},{valueString:"UK"},{valueString:"Australia"}]},{linkId:"priority",type:"integer",text:"Priority level",answerConstraint:"optionsOnly",answerOption:[{valueInteger:1},{valueInteger:2},{valueInteger:3},{valueInteger:4},{valueInteger:5}]}]},{linkId:"section-optionsOrType",type:"group",text:"Options Or Type (Allow Custom Values of Same Type)",item:[{linkId:"department",type:"string",text:"Department",answerConstraint:"optionsOrType",answerOption:[{valueString:"Engineering"},{valueString:"Sales"},{valueString:"Marketing"},{valueString:"HR"}]},{linkId:"age-group",type:"integer",text:"Age",answerConstraint:"optionsOrType",answerOption:[{valueInteger:18},{valueInteger:25},{valueInteger:35},{valueInteger:45},{valueInteger:55},{valueInteger:65}]},{linkId:"weight",type:"decimal",text:"Weight (kg)",answerConstraint:"optionsOrType",answerOption:[{valueDecimal:50},{valueDecimal:60},{valueDecimal:70},{valueDecimal:80},{valueDecimal:90}]},{linkId:"appointment-date",type:"date",text:"Preferred appointment date",answerConstraint:"optionsOrType",answerOption:[{valueDate:"2025-01-15"},{valueDate:"2025-01-22"},{valueDate:"2025-01-29"},{valueDate:"2025-02-05"}]},{linkId:"appointment-time",type:"time",text:"Preferred time",answerConstraint:"optionsOrType",answerOption:[{valueTime:"09:00:00"},{valueTime:"10:00:00"},{valueTime:"11:00:00"},{valueTime:"14:00:00"},{valueTime:"15:00:00"},{valueTime:"16:00:00"}]},{linkId:"meeting-datetime",type:"dateTime",text:"Meeting date and time",answerConstraint:"optionsOrType",answerOption:[{valueDateTime:"2025-01-15T09:00:00Z"},{valueDateTime:"2025-01-15T14:00:00Z"},{valueDateTime:"2025-01-16T09:00:00Z"},{valueDateTime:"2025-01-16T14:00:00Z"}]},{linkId:"dosage",type:"quantity",text:"Medication dosage",answerConstraint:"optionsOrType",extension:[{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-unitOption",valueCoding:{system:"http://unitsofmeasure.org",code:"mg",display:"milligram"}},{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-unitOption",valueCoding:{system:"http://unitsofmeasure.org",code:"g",display:"gram"}},{url:"http://hl7.org/fhir/StructureDefinition/questionnaire-unitOption",valueCoding:{system:"http://unitsofmeasure.org",code:"mL",display:"milliliter"}}],answerOption:[{valueQuantity:{value:10,unit:"mg",system:"http://unitsofmeasure.org",code:"mg"}},{valueQuantity:{value:25,unit:"mg",system:"http://unitsofmeasure.org",code:"mg"}},{valueQuantity:{value:50,unit:"mg",system:"http://unitsofmeasure.org",code:"mg"}},{valueQuantity:{value:100,unit:"mg",system:"http://unitsofmeasure.org",code:"mg"}}]}]},{linkId:"section-mixed",type:"group",text:"Mixed Examples",item:[{linkId:"symptom",type:"string",text:"Main symptom",answerConstraint:"optionsOrString",repeats:!0,answerOption:[{valueString:"Headache"},{valueString:"Fever"},{valueString:"Cough"},{valueString:"Fatigue"},{valueString:"Nausea"}]},{linkId:"blood-pressure-systolic",type:"integer",text:"Systolic blood pressure (mmHg)",answerConstraint:"optionsOrType",answerOption:[{valueInteger:90},{valueInteger:100},{valueInteger:110},{valueInteger:120},{valueInteger:130},{valueInteger:140},{valueInteger:150}],extension:[{url:"http://hl7.org/fhir/StructureDefinition/minValue",valueInteger:70},{url:"http://hl7.org/fhir/StructureDefinition/maxValue",valueInteger:200}]},{linkId:"temperature",type:"decimal",text:"Body temperature (°C)",answerConstraint:"optionsOrType",answerOption:[{valueDecimal:36.5},{valueDecimal:37},{valueDecimal:37.5},{valueDecimal:38},{valueDecimal:38.5},{valueDecimal:39}],extension:[{url:"http://hl7.org/fhir/StructureDefinition/minValue",valueDecimal:35},{url:"http://hl7.org/fhir/StructureDefinition/maxValue",valueDecimal:42}]}]}],Gi={resourceType:Ui,id:Hi,url:Li,status:Wi,title:zi,description:_i,item:Fi},Zi="Questionnaire",Ji="answer-valueset-demo",Ki="http://example.org/Questionnaire/answer-valueset-demo",Yi="active",Xi="Answer ValueSet Demo (tx.fhir.org by default)",en="Demonstrates answerValueSet property with ValueSet expansion",tn=[{linkId:"administrative-gender",type:"coding",text:"Administrative Gender (default server)",answerValueSet:"http://hl7.org/fhir/ValueSet/administrative-gender",required:!0},{linkId:"contact-method",type:"coding",text:"Preferred Contact Method",answerValueSet:"http://hl7.org/fhir/ValueSet/contact-point-system"},{linkId:"marital-status",type:"coding",text:"Marital Status (with preferredTerminologyServer) (tx.health-samurai.io)",answerValueSet:"http://hl7.org/fhir/ValueSet/marital-status",extension:[{url:"http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-preferredTerminologyServer",valueUrl:"https://tx.health-samurai.io/fhir"}]}],nn={resourceType:Zi,id:Ji,url:Ki,status:Yi,title:Xi,description:en,item:tn},on="Questionnaire",rn="item-control-matrix",sn="draft",an="Item Control and Constraint Matrix",ln="Enumerates every supported itemControl code for display, group, and question items while exercising each answerConstraint combination.",un=JSON.parse('[{"linkId":"display-controls","text":"Display annotations","type":"group","item":[{"linkId":"annotated-question","text":"Annotated text input","type":"string","answerConstraint":"optionsOrString","item":[{"linkId":"annotated-inline","text":"Inline helper text","type":"display","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"inline"}]}}]},{"linkId":"annotated-prompt","text":"Prompt that precedes the field","type":"display","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"prompt"}]}}]},{"linkId":"annotated-unit","text":"mg/dL","type":"display","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"unit"}]}}]},{"linkId":"annotated-lower","text":"Least severe","type":"display","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"lower"}]}}]},{"linkId":"annotated-upper","text":"Most severe","type":"display","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"upper"}]}}]},{"linkId":"annotated-flyover","text":"Hover to read extended context","type":"display","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"flyover"}]}}]},{"linkId":"annotated-help","text":"Help panel explaining what to enter","type":"display","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"help"}]}}]},{"linkId":"annotated-legal","text":"Legal disclaimer binding the participant","type":"display","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"legal"}]}}]}],"answerOption":[{"valueString":"Alpha"},{"valueString":"Beta"}]},{"linkId":"entry-format-question","text":"Entry format masked input","type":"string","answerConstraint":"optionsOrString","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"text"}]}},{"url":"http://hl7.org/fhir/StructureDefinition/entryFormat","valueString":"AAA-999"}],"answerOption":[{"valueString":"ABC-123"},{"valueString":"XYZ-999"}]}]},{"linkId":"group-controls","text":"Group itemControls","type":"group","item":[{"linkId":"group-group","text":"Default stacked section (group)","type":"group","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"group"}]}}],"item":[{"linkId":"group-group-question","text":"Default stacked section question","type":"string","answerConstraint":"optionsOnly","answerOption":[{"valueString":"Default stacked section question option A"},{"valueString":"Default stacked section question option B"}]}]},{"linkId":"group-list","text":"Checklist style (list)","type":"group","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"list"}]}}],"item":[{"linkId":"group-list-question","text":"Checklist style question","type":"string","answerConstraint":"optionsOnly","answerOption":[{"valueString":"Checklist style question option A"},{"valueString":"Checklist style question option B"}]}]},{"linkId":"group-table","text":"Vertical table (table)","type":"group","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"table"}]}}],"item":[{"linkId":"group-table-question","text":"Vertical table question","type":"string","answerConstraint":"optionsOnly","answerOption":[{"valueString":"Vertical table question option A"},{"valueString":"Vertical table question option B"}]}]},{"linkId":"group-htable","text":"Horizontal table (htable)","type":"group","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"htable"}]}}],"item":[{"linkId":"group-htable-question","text":"Horizontal table question","type":"string","answerConstraint":"optionsOnly","answerOption":[{"valueString":"Horizontal table question option A"},{"valueString":"Horizontal table question option B"}]}]},{"linkId":"group-gtable","text":"Grid table (gtable)","type":"group","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"gtable"}]}}],"item":[{"linkId":"group-gtable-question","text":"Grid table question","type":"string","answerConstraint":"optionsOnly","answerOption":[{"valueString":"Grid table question option A"},{"valueString":"Grid table question option B"}]}]},{"linkId":"group-atable","text":"Answer table (atable)","type":"group","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"atable"}]}}],"item":[{"linkId":"group-atable-question","text":"Answer table question","type":"string","answerConstraint":"optionsOnly","answerOption":[{"valueString":"Answer table question option A"},{"valueString":"Answer table question option B"}]}]},{"linkId":"group-grid","text":"Responsive grid (grid)","type":"group","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"grid"}]}}],"item":[{"linkId":"group-grid-question-1","text":"Responsive grid Q1","type":"string","answerConstraint":"optionsOnly","answerOption":[{"valueString":"Responsive grid Q1 option A"},{"valueString":"Responsive grid Q1 option B"}]},{"linkId":"group-grid-question-2","text":"Responsive grid Q2","type":"string","answerConstraint":"optionsOnly","answerOption":[{"valueString":"Responsive grid Q2 option A"},{"valueString":"Responsive grid Q2 option B"}]},{"linkId":"group-grid-question-3","text":"Responsive grid Q3","type":"string","answerConstraint":"optionsOnly","answerOption":[{"valueString":"Responsive grid Q3 option A"},{"valueString":"Responsive grid Q3 option B"}]},{"linkId":"group-grid-question-4","text":"Responsive grid Q4","type":"string","answerConstraint":"optionsOnly","answerOption":[{"valueString":"Responsive grid Q4 option A"},{"valueString":"Responsive grid Q4 option B"}]}]},{"linkId":"group-header","text":"Header-style section (header)","type":"group","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"header"}]}}],"item":[{"linkId":"group-header-question","text":"Header-style section question","type":"string","answerConstraint":"optionsOnly","answerOption":[{"valueString":"Header-style section question option A"},{"valueString":"Header-style section question option B"}]}]},{"linkId":"group-footer","text":"Footer-style section (footer)","type":"group","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"footer"}]}}],"item":[{"linkId":"group-footer-question","text":"Footer-style section question","type":"string","answerConstraint":"optionsOnly","answerOption":[{"valueString":"Footer-style section question option A"},{"valueString":"Footer-style section question option B"}]}]},{"linkId":"group-page","text":"Page block (page)","type":"group","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"page"}]}}],"item":[{"linkId":"group-page-question","text":"Page block question","type":"string","answerConstraint":"optionsOnly","answerOption":[{"valueString":"Page block question option A"},{"valueString":"Page block question option B"}]}]},{"linkId":"group-tab-container","text":"Tabbed container (tab-container)","type":"group","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"tab-container"}]}}],"item":[{"linkId":"tab-1","text":"History","type":"group","item":[{"linkId":"tab-1-question","text":"History detail","type":"string","answerConstraint":"optionsOnly","answerOption":[{"valueString":"History detail option A"},{"valueString":"History detail option B"}]}]},{"linkId":"tab-2","text":"Medications","type":"group","item":[{"linkId":"tab-2-question","text":"Medications detail","type":"string","answerConstraint":"optionsOnly","answerOption":[{"valueString":"Medications detail option A"},{"valueString":"Medications detail option B"}]}]},{"linkId":"tab-3","text":"Vitals","type":"group","item":[{"linkId":"tab-3-question","text":"Vitals detail","type":"string","answerConstraint":"optionsOnly","answerOption":[{"valueString":"Vitals detail option A"},{"valueString":"Vitals detail option B"}]}]}]}]},{"linkId":"question-controls","text":"Question itemControls across constraints","type":"group","item":[{"linkId":"question-text-string-optionsOnly","text":"Text control (options only)","type":"string","answerConstraint":"optionsOnly","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"text"}]}}],"answerOption":[{"valueString":"text-control alpha"},{"valueString":"text-control beta"}]},{"linkId":"question-text-string-optionsOrType","text":"Text control (options or type)","type":"string","answerConstraint":"optionsOrType","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"text"}]}}],"answerOption":[{"valueString":"text-control-type alpha"},{"valueString":"text-control-type beta"}]},{"linkId":"question-text-string-optionsOrString","text":"Text control (options or string)","type":"string","answerConstraint":"optionsOrString","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"text"}]}}],"answerOption":[{"valueString":"text-control-string alpha"},{"valueString":"text-control-string beta"}]},{"linkId":"question-text-box-text-optionsOnly","text":"Text-box narrative","type":"text","answerConstraint":"optionsOnly","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"text-box"}]}}],"answerOption":[{"valueString":"text-box narrative one"},{"valueString":"text-box narrative two"}]},{"linkId":"question-text-box-url-optionsOrType","text":"Text-box for URL entries","type":"url","answerConstraint":"optionsOrType","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"text-box"}]}}],"answerOption":[{"valueUri":"https://example.org/text-box-url/a"},{"valueUri":"https://example.org/text-box-url/b"}]},{"linkId":"question-text-box-attachment-optionsOrString","text":"Text-box referencing attachments","type":"attachment","answerConstraint":"optionsOrString","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"text-box"}]}}],"answerOption":[{"valueAttachment":{"contentType":"text/plain","url":"https://example.org/docs/sample-a.txt","title":"Attachment A"}},{"valueAttachment":{"contentType":"text/plain","url":"https://example.org/docs/sample-b.txt","title":"Attachment B"}}]},{"linkId":"question-slider-integer-optionsOnly","text":"Integer slider","type":"integer","answerConstraint":"optionsOnly","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"slider"}]}},{"url":"http://hl7.org/fhir/StructureDefinition/minValue","valueInteger":0},{"url":"http://hl7.org/fhir/StructureDefinition/maxValue","valueInteger":100}],"answerOption":[{"valueInteger":5},{"valueInteger":10}],"item":[{"linkId":"question-slider-integer-optionsOnly-lower-label","text":"Lower boundary","type":"display","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"lower"}]}}]},{"linkId":"question-slider-integer-optionsOnly-upper-label","text":"Upper boundary","type":"display","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"upper"}]}}]}]},{"linkId":"question-slider-decimal-optionsOrType","text":"Decimal slider","type":"decimal","answerConstraint":"optionsOrType","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"slider"}]}},{"url":"http://hl7.org/fhir/StructureDefinition/minValue","valueDecimal":0},{"url":"http://hl7.org/fhir/StructureDefinition/maxValue","valueDecimal":10}],"answerOption":[{"valueDecimal":1.5},{"valueDecimal":3.75}],"item":[{"linkId":"question-slider-decimal-optionsOrType-lower-label","text":"Lower boundary","type":"display","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"lower"}]}}]},{"linkId":"question-slider-decimal-optionsOrType-upper-label","text":"Upper boundary","type":"display","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"upper"}]}}]}]},{"linkId":"question-slider-quantity-optionsOrString","text":"Quantity slider","type":"quantity","answerConstraint":"optionsOrString","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"slider"}]}},{"url":"http://hl7.org/fhir/StructureDefinition/minValue","valueQuantity":{"value":0,"unit":"mg","system":"http://unitsofmeasure.org","code":"mg"}},{"url":"http://hl7.org/fhir/StructureDefinition/maxValue","valueQuantity":{"value":20,"unit":"mg","system":"http://unitsofmeasure.org","code":"mg"}}],"answerOption":[{"valueQuantity":{"value":5,"unit":"mg","system":"http://unitsofmeasure.org","code":"mg"}},{"valueQuantity":{"value":10,"unit":"mg","system":"http://unitsofmeasure.org","code":"mg"}}],"item":[{"linkId":"question-slider-quantity-optionsOrString-lower-label","text":"Lower boundary","type":"display","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"lower"}]}}]},{"linkId":"question-slider-quantity-optionsOrString-upper-label","text":"Upper boundary","type":"display","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"upper"}]}}]}]},{"linkId":"question-spinner-integer-optionsOnly","text":"Integer spinner","type":"integer","answerConstraint":"optionsOnly","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"spinner"}]}}],"answerOption":[{"valueInteger":5},{"valueInteger":10}]},{"linkId":"question-spinner-decimal-optionsOrType","text":"Decimal spinner","type":"decimal","answerConstraint":"optionsOrType","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"spinner"}]}}],"answerOption":[{"valueDecimal":1.5},{"valueDecimal":3.75}]},{"linkId":"question-spinner-time-optionsOrString","text":"Time spinner","type":"time","answerConstraint":"optionsOrString","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"spinner"}]}}],"answerOption":[{"valueTime":"08:00:00"},{"valueTime":"17:30:00"}]},{"linkId":"question-radio-button-coding-optionsOnly","text":"Coding radio group","type":"coding","answerConstraint":"optionsOnly","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"radio-button"}]}}],"answerOption":[{"valueCoding":{"system":"http://loinc.org","code":"radio-coding-a","display":"radio-coding option A"}},{"valueCoding":{"system":"http://loinc.org","code":"radio-coding-b","display":"radio-coding option B"}}]},{"linkId":"question-radio-button-boolean-optionsOrType","text":"Boolean radio group","type":"boolean","answerConstraint":"optionsOrType","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"radio-button"}]}}],"answerOption":[{"valueBoolean":true},{"valueBoolean":false}]},{"linkId":"question-radio-button-coding-optionsOrString","text":"Open-choice radio group","type":"coding","answerConstraint":"optionsOrString","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"radio-button"}]}}],"answerOption":[{"valueCoding":{"system":"http://loinc.org","code":"radio-open-a","display":"radio-open option A"}},{"valueCoding":{"system":"http://loinc.org","code":"radio-open-b","display":"radio-open option B"}}]},{"linkId":"question-drop-down-coding-optionsOnly","text":"Coding drop-down","type":"coding","answerConstraint":"optionsOnly","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"drop-down"}]}}],"answerOption":[{"valueCoding":{"system":"http://loinc.org","code":"dropdown-coding-a","display":"dropdown-coding option A"}},{"valueCoding":{"system":"http://loinc.org","code":"dropdown-coding-b","display":"dropdown-coding option B"}}]},{"linkId":"question-drop-down-reference-optionsOrType","text":"Reference drop-down","type":"reference","answerConstraint":"optionsOrType","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"drop-down"}]}}],"answerOption":[{"valueReference":{"reference":"Organization/dropdown-reference-a","display":"dropdown-reference Organization A"}},{"valueReference":{"reference":"Organization/dropdown-reference-b","display":"dropdown-reference Organization B"}}]},{"linkId":"question-drop-down-coding-optionsOrString","text":"Open-choice drop-down","type":"coding","answerConstraint":"optionsOrString","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"drop-down"}]}}],"answerOption":[{"valueCoding":{"system":"http://loinc.org","code":"dropdown-open-a","display":"dropdown-open option A"}},{"valueCoding":{"system":"http://loinc.org","code":"dropdown-open-b","display":"dropdown-open option B"}}]},{"linkId":"question-check-box-boolean-optionsOnly","text":"Boolean checkbox","type":"boolean","answerConstraint":"optionsOnly","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"check-box"}]}}],"answerOption":[{"valueBoolean":true},{"valueBoolean":false}]},{"linkId":"question-check-box-coding-optionsOrType","text":"Coding multi-select checkbox","type":"coding","answerConstraint":"optionsOrType","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"check-box"}]}}],"answerOption":[{"valueCoding":{"system":"http://loinc.org","code":"checkbox-coding-a","display":"checkbox-coding option A"}},{"valueCoding":{"system":"http://loinc.org","code":"checkbox-coding-b","display":"checkbox-coding option B"}}]},{"linkId":"question-check-box-coding-optionsOrString","text":"Open-choice checkbox","type":"coding","answerConstraint":"optionsOrString","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"check-box"}]}}],"answerOption":[{"valueCoding":{"system":"http://loinc.org","code":"checkbox-open-a","display":"checkbox-open option A"}},{"valueCoding":{"system":"http://loinc.org","code":"checkbox-open-b","display":"checkbox-open option B"}}]},{"linkId":"question-autocomplete-coding-optionsOnly","text":"Coding autocomplete","type":"coding","answerConstraint":"optionsOnly","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"autocomplete"}]}}],"answerOption":[{"valueCoding":{"system":"http://loinc.org","code":"auto-coding-a","display":"auto-coding option A"}},{"valueCoding":{"system":"http://loinc.org","code":"auto-coding-b","display":"auto-coding option B"}}]},{"linkId":"question-autocomplete-coding-optionsOrType","text":"Coding autocomplete (typed)","type":"coding","answerConstraint":"optionsOrType","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"autocomplete"}]}}],"answerOption":[{"valueCoding":{"system":"http://loinc.org","code":"auto-coding-type-a","display":"auto-coding-type option A"}},{"valueCoding":{"system":"http://loinc.org","code":"auto-coding-type-b","display":"auto-coding-type option B"}}]},{"linkId":"question-autocomplete-coding-optionsOrString","text":"Open-choice autocomplete","type":"coding","answerConstraint":"optionsOrString","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"autocomplete"}]}}],"answerOption":[{"valueCoding":{"system":"http://loinc.org","code":"auto-coding-string-a","display":"auto-coding-string option A"}},{"valueCoding":{"system":"http://loinc.org","code":"auto-coding-string-b","display":"auto-coding-string option B"}}]},{"linkId":"question-lookup-reference-optionsOnly","text":"Reference lookup","type":"reference","answerConstraint":"optionsOnly","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"lookup"}]}}],"answerOption":[{"valueReference":{"reference":"Organization/lookup-reference-a","display":"lookup-reference Organization A"}},{"valueReference":{"reference":"Organization/lookup-reference-b","display":"lookup-reference Organization B"}}]},{"linkId":"question-lookup-reference-optionsOrType","text":"Reference lookup (typed)","type":"reference","answerConstraint":"optionsOrType","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"lookup"}]}}],"answerOption":[{"valueReference":{"reference":"Organization/lookup-reference-type-a","display":"lookup-reference-type Organization A"}},{"valueReference":{"reference":"Organization/lookup-reference-type-b","display":"lookup-reference-type Organization B"}}]},{"linkId":"question-lookup-reference-optionsOrString","text":"Open-choice lookup","type":"reference","answerConstraint":"optionsOrString","extension":[{"url":"http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl","valueCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/questionnaire-item-control","code":"lookup"}]}}],"answerOption":[{"valueReference":{"reference":"Organization/lookup-reference-string-a","display":"lookup-reference-string Organization A"}},{"valueReference":{"reference":"Organization/lookup-reference-string-b","display":"lookup-reference-string Organization B"}}]}]}]'),pn={resourceType:on,id:rn,status:sn,title:an,description:ln,item:un},cn=[{id:"text-controls",label:"Basic text inputs",questionnaire:xe},{id:"boolean-gating",label:"Boolean enableWhen",questionnaire:Se},{id:"numeric-thresholds",label:"Numeric comparisons",questionnaire:Ee},{id:"numeric-units",label:"Numeric units",questionnaire:Ve},{id:"quantity-unit-options",label:"Quantity unit options",questionnaire:Le},{id:"item-control-help",label:"Help controls",questionnaire:Ze},{id:"repeating-question",label:"Repeating question answers",questionnaire:it},{id:"repeating-group",label:"Repeating group instances",questionnaire:ut},{id:"nested-follow-ups",label:"Nested follow-up questions",questionnaire:yt},{id:"static-initials",label:"Static initial values",questionnaire:Ct},{id:"expression-initial",label:"Initial expression defaults",questionnaire:$t},{id:"expression-calculated",label:"Calculated expressions",questionnaire:Vt},{id:"expression-enable-when",label:"Expression-based enablement",questionnaire:Wt},{id:"expression-dynamic-bounds",label:"Dynamic min/max expressions",questionnaire:Kt},{id:"expression-dynamic-behavior",label:"Dynamic behavior expressions",questionnaire:oi},{id:"expression-dynamic-quantity",label:"Dynamic quantity expressions",questionnaire:ci},{id:"answer-options",label:"Answer options",questionnaire:fi},{id:"answer-expression",label:"Answer expressions",questionnaire:bi},{id:"validation",label:"Validation",questionnaire:Qi},{id:"target-constraint",label:"Target constraints",questionnaire:ji},{id:"answer-constraint",label:"Answer constraints",questionnaire:Gi},{id:"answer-valueset",label:"Answer ValueSet",questionnaire:nn},{id:"item-control-matrix",label:"Item control + constraint matrix",questionnaire:pn}],{addons:dn}=__STORYBOOK_MODULE_PREVIEW_API__,hn="https://tx.fhir.org/r5";function gn({questionnaireSource:r,defaultQuestionnaire:t,terminologyServerUrl:u,storyId:a}){const o=dn.getChannel(),{questionnaire:p,error:d}=c.useMemo(()=>{try{const l=JSON.parse(r);if(l.resourceType!=="Questionnaire")throw new Error("JSON is not a Questionnaire resource");return{questionnaire:l,error:null}}catch(l){const h=l instanceof Error?l.message:String(l);return{questionnaire:t,error:h}}},[t,r]);return c.useEffect(()=>(o.emit(x,{storyId:a,response:null}),()=>{o.emit(x,{storyId:a,response:null})}),[o,a]),i.jsxs("div",{style:{padding:16},children:[i.jsx(X,{questionnaire:p,terminologyServerUrl:u,onChange:l=>o.emit(x,{storyId:a,response:l}),onSubmit:l=>o.emit(x,{storyId:a,response:l})}),d?i.jsxs("p",{style:{marginTop:12,color:"#b91c1c"},children:["Falling back to sample default because: ",d]}):null]})}const kn={title:"Samples",parameters:{layout:"fullscreen",controls:{exclude:["questionnaireSource","defaultQuestionnaire"]}},argTypes:{questionnaireSource:{control:{disable:!0},table:{disable:!0}},defaultQuestionnaire:{table:{disable:!0}}}};function mn(r){const t=cn.find(u=>u.id===r);if(!t)throw new Error(`Unknown sample id: ${r}`);return t}function n(r){const t=mn(r),u=JSON.stringify(t.questionnaire,null,2);return{name:t.label,args:{questionnaireSource:u,defaultQuestionnaire:t.questionnaire,terminologyServerUrl:hn},render:(a,o)=>i.jsx(gn,{...a,storyId:o.id})}}const f=n("text-controls"),v=n("boolean-gating"),w=n("numeric-thresholds"),k=n("numeric-units"),q=n("quantity-unit-options"),C=n("item-control-help"),S=n("repeating-question"),b=n("repeating-group"),I=n("nested-follow-ups"),D=n("static-initials"),O=n("expression-initial"),T=n("expression-calculated"),$=n("expression-enable-when"),E=n("expression-dynamic-bounds"),Q=n("expression-dynamic-behavior"),A=n("expression-dynamic-quantity"),B=n("answer-options"),R=n("answer-expression"),N=n("validation"),V=n("target-constraint"),M=n("answer-constraint"),P=n("answer-valueset"),j=n("item-control-matrix");f.parameters={...f.parameters,docs:{...f.parameters?.docs,source:{originalSource:'makeStory("text-controls")',...f.parameters?.docs?.source}}};v.parameters={...v.parameters,docs:{...v.parameters?.docs,source:{originalSource:'makeStory("boolean-gating")',...v.parameters?.docs?.source}}};w.parameters={...w.parameters,docs:{...w.parameters?.docs,source:{originalSource:'makeStory("numeric-thresholds")',...w.parameters?.docs?.source}}};k.parameters={...k.parameters,docs:{...k.parameters?.docs,source:{originalSource:'makeStory("numeric-units")',...k.parameters?.docs?.source}}};q.parameters={...q.parameters,docs:{...q.parameters?.docs,source:{originalSource:'makeStory("quantity-unit-options")',...q.parameters?.docs?.source}}};C.parameters={...C.parameters,docs:{...C.parameters?.docs,source:{originalSource:'makeStory("item-control-help")',...C.parameters?.docs?.source}}};S.parameters={...S.parameters,docs:{...S.parameters?.docs,source:{originalSource:'makeStory("repeating-question")',...S.parameters?.docs?.source}}};b.parameters={...b.parameters,docs:{...b.parameters?.docs,source:{originalSource:'makeStory("repeating-group")',...b.parameters?.docs?.source}}};I.parameters={...I.parameters,docs:{...I.parameters?.docs,source:{originalSource:'makeStory("nested-follow-ups")',...I.parameters?.docs?.source}}};D.parameters={...D.parameters,docs:{...D.parameters?.docs,source:{originalSource:'makeStory("static-initials")',...D.parameters?.docs?.source}}};O.parameters={...O.parameters,docs:{...O.parameters?.docs,source:{originalSource:'makeStory("expression-initial")',...O.parameters?.docs?.source}}};T.parameters={...T.parameters,docs:{...T.parameters?.docs,source:{originalSource:'makeStory("expression-calculated")',...T.parameters?.docs?.source}}};$.parameters={...$.parameters,docs:{...$.parameters?.docs,source:{originalSource:'makeStory("expression-enable-when")',...$.parameters?.docs?.source}}};E.parameters={...E.parameters,docs:{...E.parameters?.docs,source:{originalSource:'makeStory("expression-dynamic-bounds")',...E.parameters?.docs?.source}}};Q.parameters={...Q.parameters,docs:{...Q.parameters?.docs,source:{originalSource:'makeStory("expression-dynamic-behavior")',...Q.parameters?.docs?.source}}};A.parameters={...A.parameters,docs:{...A.parameters?.docs,source:{originalSource:'makeStory("expression-dynamic-quantity")',...A.parameters?.docs?.source}}};B.parameters={...B.parameters,docs:{...B.parameters?.docs,source:{originalSource:'makeStory("answer-options")',...B.parameters?.docs?.source}}};R.parameters={...R.parameters,docs:{...R.parameters?.docs,source:{originalSource:'makeStory("answer-expression")',...R.parameters?.docs?.source}}};N.parameters={...N.parameters,docs:{...N.parameters?.docs,source:{originalSource:'makeStory("validation")',...N.parameters?.docs?.source}}};V.parameters={...V.parameters,docs:{...V.parameters?.docs,source:{originalSource:'makeStory("target-constraint")',...V.parameters?.docs?.source}}};M.parameters={...M.parameters,docs:{...M.parameters?.docs,source:{originalSource:'makeStory("answer-constraint")',...M.parameters?.docs?.source}}};P.parameters={...P.parameters,docs:{...P.parameters?.docs,source:{originalSource:'makeStory("answer-valueset")',...P.parameters?.docs?.source}}};j.parameters={...j.parameters,docs:{...j.parameters?.docs,source:{originalSource:'makeStory("item-control-matrix")',...j.parameters?.docs?.source}}};const qn=["BasicTextInputs","BooleanEnableWhen","NumericThresholds","NumericUnits","QuantityUnitOptions","HelpControls","RepeatingQuestionAnswers","RepeatingGroupInstances","NestedFollowUps","StaticInitials","ExpressionInitialDefaults","ExpressionCalculated","ExpressionEnableWhen","ExpressionDynamicBounds","ExpressionDynamicBehavior","ExpressionDynamicQuantity","AnswerOptions","AnswerExpressions","Validation","TargetConstraints","AnswerConstraints","AnswerValueSet","ItemControlMatrix"];export{M as AnswerConstraints,R as AnswerExpressions,B as AnswerOptions,P as AnswerValueSet,f as BasicTextInputs,v as BooleanEnableWhen,T as ExpressionCalculated,Q as ExpressionDynamicBehavior,E as ExpressionDynamicBounds,A as ExpressionDynamicQuantity,$ as ExpressionEnableWhen,O as ExpressionInitialDefaults,C as HelpControls,j as ItemControlMatrix,I as NestedFollowUps,w as NumericThresholds,k as NumericUnits,q as QuantityUnitOptions,b as RepeatingGroupInstances,S as RepeatingQuestionAnswers,D as StaticInitials,V as TargetConstraints,N as Validation,qn as __namedExportsOrder,kn as default};
