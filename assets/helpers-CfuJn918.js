import{j as o}from"./index-D2wdwpy5.js";import{F as d,N as m,a as O,b as x,E as i,Q as y,I as f,A as T}from"./form--V8JF-XN.js";import{r as a}from"./iframe-DjGFu-T5.js";const{addons:_}=__STORYBOOK_MODULE_PREVIEW_API__,E=["none","autocomplete","drop-down","check-box","lookup","radio-button","slider","spinner","text-box"],I=["optionsOnly","optionsOrType","optionsOrString"],k={itemControl:{name:"Item control",options:E,control:{type:"select",labels:{none:"None",autocomplete:"Autocomplete","drop-down":"Drop-down","check-box":"Check box",lookup:"Lookup","radio-button":"Radio button",slider:"Slider",spinner:"Spinner","text-box":"Text box"}},description:"Questionnaire itemControl extension (or none)."},repeats:{name:"Repeating question",control:{type:"boolean"},description:"Whether the question repeats."},hasAnswerOptions:{name:"Has answer options",control:{type:"boolean"},description:"Include answerOption entries. Turn off to mimic 'without answer-options'."},answerConstraint:{name:"Answer constraint",options:I,control:{type:"select",labels:{optionsOnly:"Options only",optionsOrType:"Options or type",optionsOrString:"Options or string"}},description:"Answer constraint profile; enabled only when options are present.",if:{arg:"hasAnswerOptions",truthy:!0}}},v={layout:"padded",controls:{exclude:["node"]}};function h(e){return{url:i.ITEM_CONTROL,valueCodeableConcept:{coding:[{system:f,code:e}]}}}function w(e){const n=[...e.extensions??[]];return e.control&&n.push(h(e.control)),e.repeats&&n.push({url:i.MIN_OCCURS,valueInteger:1}),{linkId:e.linkId,text:e.text,type:e.type,repeats:e.repeats,answerOption:e.answerOption&&e.answerOption.length>0?e.answerOption:void 0,answerConstraint:e.answerConstraint,extension:n.length>0?n:void 0,item:e.item}}function b(e,n){const t=T[e];return n.map(r=>x(t,r))}function g({node:e}){return a.useEffect(()=>{const n=_.getChannel(),t=O(()=>{const r={response:e.form.response??null};n.emit(y,r)});return()=>{t()}},[e.form]),null}function N(e,n){if(e)return n}function Q({answerType:e,label:n,itemControl:t,repeats:r,hasAnswerOptions:s,answerConstraint:p,answerValues:c}){const u=N(s,p),l=s?b(e,c):void 0;return{resourceType:"Questionnaire",status:"active",item:[w({linkId:`${e}-playground`,text:n,type:e,repeats:r,control:t==="none"?void 0:t,answerConstraint:u,answerOption:l})]}}function C({questionnaire:e}){const t=a.useMemo(()=>new d(e),[e]).nodes[0];return t?o.jsxs(o.Fragment,{children:[o.jsx(g,{node:t}),o.jsx("div",{className:"af-form",style:{maxWidth:760},children:o.jsx(m,{node:t})})]}):o.jsx("p",{children:"Questionnaire did not produce a node."})}C.__docgenInfo={description:"",methods:[],displayName:"PlaygroundRenderer",props:{questionnaire:{required:!0,tsType:{name:"Questionnaire"},description:""}}};export{C as P,Q as a,v as b,k as p};
