{
  "resourceType": "Questionnaire",
  "id": "constraint",
  "status": "active",
  "title": "Validation Showcase",
  "description": "Illustrates every validation constraint supported by the renderer, showing how they behave across nested groups, repeating questions, and attachments.",
  "item": [
    {
      "linkId": "intro",
      "type": "display",
      "text": "Constraint Overview",
      "item": [
        {
          "linkId": "intro-help",
          "type": "display",
          "text": "Read the parenthetical notes to learn what each item expects",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "system": "http://hl7.org/fhir/questionnaire-item-control",
                    "code": "help"
                  }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "linkId": "patient-basics",
      "type": "group",
      "text": "Patient Basics",
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-minOccurs",
          "valueInteger": 1
        }
      ],
      "item": [
        {
          "linkId": "full-name",
          "type": "string",
          "text": "Full legal name",
          "required": true,
          "maxLength": 60,
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/minLength",
              "valueInteger": 1
            }
          ],
          "item": [
            {
              "linkId": "full-name-help",
              "type": "display",
              "text": "Required; between 1 and 60 characters",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "help"
                      }
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "preferred-name",
          "type": "string",
          "text": "Preferred name",
          "maxLength": 20,
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/minLength",
              "valueInteger": 3
            }
          ],
          "item": [
            {
              "linkId": "preferred-name-help",
              "type": "display",
              "text": "Between 3 and 20 characters",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "help"
                      }
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "age",
          "type": "integer",
          "text": "Age in years",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/minValue",
              "valueInteger": 0
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/maxValue",
              "valueInteger": 120
            }
          ],
          "item": [
            {
              "linkId": "age-help",
              "type": "display",
              "text": "Must be between 0 and 120",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "help"
                      }
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "height",
          "type": "decimal",
          "text": "Height in meters",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/maxDecimalPlaces",
              "valueInteger": 2
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/minValue",
              "valueDecimal": 0.4
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/maxValue",
              "valueDecimal": 2.5
            }
          ],
          "item": [
            {
              "linkId": "height-help",
              "type": "display",
              "text": "Accepts up to 2 decimal places",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "help"
                      }
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "birth-date",
          "type": "date",
          "text": "Date of birth",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/minValue",
              "valueDate": "1900-01-01"
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/maxValue",
              "valueDate": "2025-11-02"
            }
          ],
          "item": [
            {
              "linkId": "birth-date-help",
              "type": "display",
              "text": "Must fall between 1900-01-01 and today",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "help"
                      }
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "consent-signed-at",
          "type": "dateTime",
          "text": "Consent signed timestamp",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/minValue",
              "valueDateTime": "2025-01-01T00:00:00Z"
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/maxValue",
              "valueDateTime": "2025-12-31T23:59:59Z"
            }
          ],
          "item": [
            {
              "linkId": "consent-signed-at-help",
              "type": "display",
              "text": "Must be within calendar year 2025",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "help"
                      }
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "fasting-start",
          "type": "time",
          "text": "Fasting start time",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/minValue",
              "valueTime": "18:00:00"
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/maxValue",
              "valueTime": "23:59:59"
            }
          ],
          "item": [
            {
              "linkId": "fasting-start-help",
              "type": "display",
              "text": "Limit entry between 18:00:00 and 23:59:59",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "help"
                      }
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "weight",
          "type": "quantity",
          "text": "Body weight",
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-minQuantity",
              "valueQuantity": {
                "value": 30,
                "unit": "kg",
                "system": "http://unitsofmeasure.org",
                "code": "kg"
              }
            },
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-maxQuantity",
              "valueQuantity": {
                "value": 250,
                "unit": "kg",
                "system": "http://unitsofmeasure.org",
                "code": "kg"
              }
            }
          ],
          "item": [
            {
              "linkId": "weight-help",
              "type": "display",
              "text": "Must stay between 30 kg and 250 kg",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "help"
                      }
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "photo-id",
          "type": "attachment",
          "text": "Government ID upload",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/mimeType",
              "valueCode": "image/png"
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/mimeType",
              "valueCode": "image/jpeg"
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/maxSize",
              "valueDecimal": 1024
            }
          ],
          "item": [
            {
              "linkId": "photo-id-help",
              "type": "display",
              "text": "PNG or JPEG up to 1 MB",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "help"
                      }
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "patient-basics-help",
          "type": "display",
          "text": "Group requires at least one populated answer",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "system": "http://hl7.org/fhir/questionnaire-item-control",
                    "code": "help"
                  }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "linkId": "reported-symptoms",
      "type": "string",
      "text": "Reported symptom",
      "repeats": true,
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-minOccurs",
          "valueInteger": 1
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-maxOccurs",
          "valueInteger": 3
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/minLength",
          "valueInteger": 2
        }
      ],
      "maxLength": 120,
      "item": [
        {
          "linkId": "reported-symptoms-help",
          "type": "display",
          "text": "Repeat 1-3 times to describe each symptom",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "system": "http://hl7.org/fhir/questionnaire-item-control",
                    "code": "help"
                  }
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "linkId": "medications",
      "type": "group",
      "text": "Active medications",
      "repeats": true,
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-minOccurs",
          "valueInteger": 1
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-maxOccurs",
          "valueInteger": 2
        }
      ],
      "item": [
        {
          "linkId": "med-name",
          "type": "string",
          "text": "Medication name",
          "required": true,
          "maxLength": 50,
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/minLength",
              "valueInteger": 2
            }
          ],
          "item": [
            {
              "linkId": "med-name-help",
              "type": "display",
              "text": "Required; between 2 and 50 characters",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "help"
                      }
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "med-dose",
          "type": "quantity",
          "text": "Dosage",
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-minQuantity",
              "valueQuantity": {
                "value": 0.5,
                "unit": "mg",
                "system": "http://unitsofmeasure.org",
                "code": "mg"
              }
            },
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-maxQuantity",
              "valueQuantity": {
                "value": 10,
                "unit": "mg",
                "system": "http://unitsofmeasure.org",
                "code": "mg"
              }
            }
          ],
          "item": [
            {
              "linkId": "med-dose-help",
              "type": "display",
              "text": "Quantity must stay within prescribed range",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "help"
                      }
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "med-administration-window",
          "type": "time",
          "text": "Administration window",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/minValue",
              "valueTime": "06:00:00"
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/maxValue",
              "valueTime": "22:00:00"
            }
          ],
          "item": [
            {
              "linkId": "med-administration-window-help",
              "type": "display",
              "text": "Dose time must be between 06:00 and 22:00",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "help"
                      }
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "dose-notes",
          "type": "string",
          "text": "Dose notes",
          "maxLength": 80,
          "item": [
            {
              "linkId": "dose-notes-help",
              "type": "display",
              "text": "Optional free-text up to 80 characters",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "help"
                      }
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "dose-times",
          "type": "dateTime",
          "text": "Scheduled dose time",
          "repeats": true,
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-minOccurs",
              "valueInteger": 1
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-maxOccurs",
              "valueInteger": 4
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/minValue",
              "valueDateTime": "2025-01-01T00:00:00Z"
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/maxValue",
              "valueDateTime": "2025-12-31T23:59:59Z"
            }
          ],
          "item": [
            {
              "linkId": "dose-times-help",
              "type": "display",
              "text": "Must fall within treatment year",
              "extension": [
                {
                  "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
                  "valueCodeableConcept": {
                    "coding": [
                      {
                        "system": "http://hl7.org/fhir/questionnaire-item-control",
                        "code": "help"
                      }
                    ]
                  }
                }
              ]
            }
          ]
        },
        {
          "linkId": "medications-help",
          "type": "display",
          "text": "Collect 1-2 medication entries with nested limits",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "system": "http://hl7.org/fhir/questionnaire-item-control",
                    "code": "help"
                  }
                ]
              }
            }
          ]
        }
      ]
    }
  ]
}
